(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{229:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),l=a.n(s),c=(a(99),a(5)),o=a(6),i=a(8),u=a(7),m=a(9),h=a(233),d=a(232),g=a(91),p=a(230),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleLogout=function(e){a.props.logout()},a.state={loggedInUser:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(g.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){return this.state.loggedInUser?r.a.createElement("nav",{className:"nav-style"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.a,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(p.a,{to:"/journal"},"Journal")),r.a.createElement("li",null,r.a.createElement("a",{href:"/",onClick:this.handleLogout},"Logout")),r.a.createElement("span",null,"Welcome, ",this.state.loggedInUser.username))):r.a.createElement("div",null,r.a.createElement("nav",{className:"nav-style"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.a,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(p.a,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(p.a,{to:"/signup"},"Sign up")))))}}]),t}(n.Component);var f,b=function(e){return r.a.createElement("footer",{className:"page-footer"},r.a.createElement("div",{className:"linksNavbar"},r.a.createElement(p.a,{to:"/about"},"About"),r.a.createElement("span",null,"|"),r.a.createElement("a",{href:"/"},"Facebook"),r.a.createElement("span",null,"|"),r.a.createElement("a",{href:"/"},"Twitter"),r.a.createElement("span",null,"|"),r.a.createElement("a",{href:"/"},"Instagram")))},v=a(40),y=a.n(v),N=new function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,a){return t.service.post("/signup",{username:e,password:a}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentuser").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=y.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL+"/auth",withCredentials:!0})},C=a(30),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;N.signup(t,n).then(function(e){a.setState({username:"",password:""}),a.props.getUser(e.user)}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.state={username:"",password:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"dark-background"},r.a.createElement("h3",null,"Sign up to start publishing!"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("input",{type:"submit",value:"Sign up"})))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;N.login(t,n).then(function(e){a.setState({username:t,password:n,error:!1}),a.props.getUser(e)}).catch(function(e){a.setState({username:t,password:n,error:!0})})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.state={username:"",password:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"dark-background"},r.a.createElement("h3",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("input",{type:"submit",value:"Login"})),r.a.createElement("h1",null,this.state.error?"Error":""))}}]),t}(n.Component);var w=function(e){f="Line"===e.type?a(36).Line:"Bar"===e.type?a(36).Bar:"Pie"===e.type?a(36).Pie:a(36).Doughnut;var t=e.data.split(",").map(function(e){return Number(e)}),n={labels:function(e){return e.split(",")}(e.labels),datasets:[{label:"",data:t,fillColor:"rgba(255, 255, 255, 0.2)",strokeColor:"rgb(255, 255, 255)",borderWidth:1}]};return r.a.createElement(f,{data:n,options:{scales:{yAxes:[{gridLines:{display:!0,color:"rgb(255, 255, 255)",lineWidth:1},ticks:{beginAtZero:!1}}]}},width:"600",height:"250"})},I=function(e){return r.a.createElement("div",null,e.rawData.map(function(e,t){return"graph"===e.type?r.a.createElement(w,{key:t,type:e.data[0],labels:e.data[1],data:e.data[2]}):r.a.createElement("div",{key:t,dangerouslySetInnerHTML:{__html:e.data}})}))},S=function(e){return r.a.createElement("div",{className:"entries-wrapper"},e.entries.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h3",{className:"entry-name"},"Entry name: ",e.name),r.a.createElement(I,{key:e.name,rawData:e.data}))}))},R=function(e){if(e.posts){var t=e.posts;return r.a.createElement("div",null,t.map(function(t,a){console.log(t);var n=t.updated_at.slice(0,10);return r.a.createElement("div",{key:a},r.a.createElement("div",{className:"research-block"},r.a.createElement("h2",null,"Research Line: ",t.name),r.a.createElement("span",null,"Field: ",t.field),r.a.createElement("h4",null,"Last update: ",n),"home"===e.displaying?r.a.createElement(p.a,{to:"/journal"},r.a.createElement("button",{onClick:function(){e.branchThisResearch(t.name,t.field)}},"Branch this research")):null),r.a.createElement(S,{key:t.name,entries:t.entries}))}))}return r.a.createElement("div",null,r.a.createElement("div",null,"Displaying: ",e.displaying),r.a.createElement("h1",null,"Loading..."))},U=new function e(){var t=this;Object(c.a)(this,e),this.createNewResearch=function(e,a){return t.service.post("/newresearch",{researchName:e,field:a}).then(function(e){return console.log(e),e})},this.getUserPosts=function(e){return t.service.get("/userentries",{username:e}).then(function(e){return e})},this.getRandomPosts=function(){return t.service.get("/randomposts").then(function(e){return e})},this.saveEntryInResearch=function(e,a){return t.service.post("/saveentry",{researchName:e,entry:a}).then(function(e){return console.log(e)})},this.createBranchedResearch=function(e,a){return t.service.post("/branchresearch",{researchName:e,field:a}).then(function(e){return console.log(e),e})},this.service=y.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL+"/research",withCredentials:!0})},k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).createBranchOfResearch=function(e,t){U.createBranchedResearch(e,t)},a.getRandomPosts=function(){console.log("getRandomPosts call"),U.getRandomPosts().then(function(e){a.setState({posts:e.data})})},a.state={user:e.loggedInUser,posts:""},a.getRandomPosts(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"dark-background"},r.a.createElement("div",{className:"entries-container"},r.a.createElement(R,{displaying:"home",posts:this.state.posts,branchThisResearch:this.createBranchOfResearch})))}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getUserPosts=function(){console.log("getUserPosts call"),U.getUserPosts().then(function(e){return a.setState({posts:e.data}),e.data})},a.createBranchOfResearch=function(e,t){U.createBranchedResearch(e,t)},a.state={user:e.loggedInUser,posts:""},a.getUserPosts(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"dark-background"},this.props.message?r.a.createElement("div",{className:"message journal-message"},this.props.message):null,r.a.createElement("div",{className:"entries-container"},r.a.createElement(p.a,{to:"/newentry"},r.a.createElement("button",{id:"new-entry-button"},"New Entry")),r.a.createElement(p.a,{to:"/newresearch"},r.a.createElement("button",{id:"new-entry-button"},"New Research")),r.a.createElement(R,{displaying:"journal",posts:this.state.posts,branchThisResearch:this.createBranchOfResearch})))}}]),t}(n.Component),P=a(24),L=a(92),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).submitText=function(){a.props.saveText(Object(L.stateToHTML)(a.state.editorState.getCurrentContent()),a.props.id)},a.state={editorState:P.EditorState.createEmpty()},a.onChange=function(e){a.setState({editorState:e}),a.submitText()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"_textBold",value:function(){this.onChange(P.RichUtils.toggleInlineStyle(this.state.editorState,"BOLD"))}},{key:"_textItalic",value:function(){this.onChange(P.RichUtils.toggleInlineStyle(this.state.editorState,"ITALIC"))}},{key:"_textUnderlined",value:function(){this.onChange(P.RichUtils.toggleInlineStyle(this.state.editorState,"UNDERLINE"))}},{key:"_textCode",value:function(){this.onChange(P.RichUtils.toggleInlineStyle(this.state.editorState,"CODE"))}},{key:"render",value:function(){return r.a.createElement("div",{className:"editor-wrapper"},r.a.createElement("div",{className:"editor"},r.a.createElement(P.Editor,{editorState:this.state.editorState,onChange:this.onChange})),r.a.createElement("div",{className:"buttons-wrapper"},r.a.createElement("button",{onClick:this._textBold.bind(this)},r.a.createElement("b",null,"Bold")),r.a.createElement("button",{onClick:this._textItalic.bind(this)},r.a.createElement("i",null,"Italic")),r.a.createElement("button",{onClick:this._textUnderlined.bind(this)},r.a.createElement("u",null,"Underline")),r.a.createElement("button",{onClick:this._textCode.bind(this)},r.a.createElement("code",null,"Code"))))}}]),t}(r.a.Component),B=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).changeGraphType=function(t){var a=t.target.value;e.setState({type:a},function(){e.submitGraph()})},e.changeGraphAxis=function(t,a){"X"===a?e.setState({labels:t.target.value},function(){e.submitGraph()}):"Y"===a&&e.setState({data:t.target.value},function(){e.submitGraph()})},e.submitGraph=function(){var t=[];t.unshift(e.state.type,e.state.labels,e.state.data),e.props.saveGraph(t,e.props.id)},e.state={type:"Line",labels:"",data:"",caption:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"graph-container"},r.a.createElement(w,{type:this.state.type,data:this.state.data,labels:this.state.labels}),r.a.createElement("div",{className:"graph-options"},r.a.createElement("select",{onChange:function(t){e.changeGraphType(t)}},r.a.createElement("option",{value:"Line"},"Line"),r.a.createElement("option",{value:"Bar"},"Bar")),r.a.createElement("fieldset",null,r.a.createElement("div",{className:"graph-labels"},r.a.createElement("label",null,"Dataset for X axis:"),r.a.createElement("label",null,"Dataset for Y axis:")),r.a.createElement("div",null,r.a.createElement("textarea",{onChange:function(t){e.changeGraphAxis(t,"X")}}),r.a.createElement("textarea",{onChange:function(t){e.changeGraphAxis(t,"Y")}})))))}}]),t}(n.Component),_=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).getResearchs=function(){var t=[];U.getUserPosts().then(function(a){a.data.forEach(function(e){t.push(e.name)}),e.setState({researchs:t})})},e.updateEntryName=function(t){e.setState({entryName:t.target.value})},e.addEditor=function(t){var a,n=e.state.editorsInPage;a="text"===t?{type:t,data:""}:{type:t,data:[]},n.push(a),e.setState({editorsInPage:n},function(){console.log("editor added to state. Editors in page:"+e.state.editorsInPage)})},e.deleteEditor=function(t){var a=e.state.editorsInPage;a.splice(t,1),e.setState({editorsInPage:a})},e.storeContentFromEditor=function(t,a){var n=e.state.editorsInPage,r={type:e.state.editorsInPage[a].type,data:t};n.splice(a,1,r),e.setState({editorsInPage:n}),console.log(t)},e.sendPostToDB=function(){if(e.state.selectedResearch)if(e.state.entryName){var t=e.state.selectedResearch,a={name:e.state.entryName,data:e.state.editorsInPage};U.saveEntryInResearch(t,a),console.log(t,a)}else alert("Choose a name for your entry before submiting! :)");else alert("Select a research before saving your post :)")},e.state={researchs:[],selectedResearch:"",entryName:"",editorsInPage:[]},e.getResearchs(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.researchs?r.a.createElement("div",{className:"input-components-container"},r.a.createElement("div",{className:"creator-header"},r.a.createElement("h2",null,"New Entry"),r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:"entry-name"},"Title: "),r.a.createElement("input",{id:"entry-name",type:"text",onChange:function(t){return e.updateEntryName(t)}}),r.a.createElement("label",{htmlFor:"research"},"Associated research: "),r.a.createElement("select",{id:"research",onChange:function(t){e.setState({selectedResearch:t.target.value})}},r.a.createElement("option",{value:"",defaultValue:!0},"Select one--"),this.state.researchs.map(function(e){return r.a.createElement("option",{value:e},e)})),r.a.createElement("button",{onClick:this.sendPostToDB},"Save and publish"))),r.a.createElement("div",{className:"items-panel"},r.a.createElement("button",{className:"create-editor",onClick:function(){e.addEditor("text")}},"New Text Editor"),r.a.createElement("button",{className:"create-editor",onClick:function(){e.addEditor("graph")}},"New Graph Editor"),r.a.createElement("div",null,this.state.editorsInPage.map(function(t,a){return r.a.createElement("div",null,r.a.createElement("span",null,"Editor ",a+1,": ",t.type),r.a.createElement("button",{className:"delete-editor",onClick:function(){e.deleteEditor(a)}},"X"))}))),r.a.createElement("div",null,this.state.editorsInPage.map(function(t,a){return"text"===t.type?r.a.createElement(T,{saveText:e.storeContentFromEditor,id:a,key:a}):"graph"===t.type?r.a.createElement(B,{saveGraph:e.storeContentFromEditor,id:a,key:a}):null}))):r.a.createElement("div",null,"It seems that you have no current line of work active. Create one to begin publishing!")}}]),t}(r.a.Component),F=function(e){function t(e,a){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e,a))).updateResearchName=function(e){var t=e.target.value;n.setState({researchName:t})},n.updateField=function(e){var t=e.target.value;n.setState({field:t},function(){console.log(t)})},n.createResearch=function(){n.state.researchName?U.createNewResearch(n.state.researchName,n.state.field).then(function(){n.setState({researchName:"",field:"",createdResearch:!0})}):alert("Please, fill the name of your research! :)")},n.state={researchName:"",field:"",createdResearch:!1},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.createdResearch?r.a.createElement("div",{className:"input-components-container"},r.a.createElement("fieldset",{className:"research-creator"},r.a.createElement("h2",null,"New Research"),r.a.createElement("label",{htmlFor:"name"},"Name of the new research line:"),r.a.createElement("input",{id:"name",type:"text",onChange:function(t){e.updateResearchName(t)}}),r.a.createElement("label",{htmlFor:"tags"},"Field:"),r.a.createElement("input",{id:"name",type:"text",onChange:function(t){e.updateField(t)}}),r.a.createElement("button",{onClick:function(){return e.createResearch()}},"Create Research"),r.a.createElement("div",{className:"message"},"Research created succesfully!"))):r.a.createElement("div",{className:"input-components-container"},r.a.createElement("fieldset",{className:"research-creator"},r.a.createElement("h2",null,"New Research"),r.a.createElement("label",{htmlFor:"name"},"Name of the new research line:"),r.a.createElement("input",{id:"name",type:"text",onChange:function(t){e.updateResearchName(t)}}),r.a.createElement("label",{htmlFor:"tags"},"Field:"),r.a.createElement("input",{id:"name",type:"text",onChange:function(t){e.updateField(t)}}),r.a.createElement("button",{onClick:function(){return e.createResearch()}},"Create Research"))))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getTheUser=function(e){a.setState({loggedInUser:e})},a.logout=function(){N.logout().then(function(){a.setState({loggedInUser:null})})},a.state={loggedInUser:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&N.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(E,{userInSession:this.state.loggedInUser,logout:this.logout})),r.a.createElement(h.a,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(){return r.a.createElement(k,null)}}),r.a.createElement(d.a,{exact:!0,path:"/journal",render:function(){return r.a.createElement(x,{loggedInUser:e.state.loggedInUser})}}),r.a.createElement(d.a,{exact:!0,path:"/journal/newbranch",render:function(){return r.a.createElement(x,{message:"You just branched a research. Start contributing creating a new post.",loggedInUser:e.state.loggedInUser})}}),r.a.createElement(d.a,{exact:!0,path:"/newentry",render:function(){return r.a.createElement(_,null)}}),r.a.createElement(d.a,{exact:!0,path:"/newresearch",render:function(){return r.a.createElement(F,null)}}),r.a.createElement(d.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(x,{message:"Welcome to your journal",loggedInUser:e.state.loggedInUser})}})),r.a.createElement(b,null)):r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(E,{userInSession:this.state.loggedInUser,logout:this.logout})),r.a.createElement(h.a,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(){return r.a.createElement(k,{loggedInUser:!1})}}),r.a.createElement(d.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(j,{getUser:e.getTheUser})}}),r.a.createElement(d.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(O,{getUser:e.getTheUser})}})),r.a.createElement(b,null))}}]),t}(n.Component),D=a(231);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(D.a,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},94:function(e,t,a){e.exports=a(229)},99:function(e,t,a){}},[[94,2,1]]]);
//# sourceMappingURL=main.01fa3761.chunk.js.map